{#
LimeSurvey
Copyright (C) 2007-2017 The LimeSurvey Project Team / Louis Gac
All rights reserved.
License: GNU/GPL License v2 or later, see LICENSE.php
LimeSurvey is free software. This version may have been modified pursuant
to the GNU General Public License, and as distributed it includes or
is derivative of works licensed under the GNU General Public License or
other free or open source software licenses.
See COPYRIGHT.php for copyright notices and details.

(¯`·._.·(¯`·._.·  Language Changer for Top Menu ·._.·´¯)·._.·´¯)

Show a language changer inside the top menu

It's a typical bootstrap dropdown button.
@see: http://getbootstrap.com/components/#dropdowns

@var string aSurveyInfo.alanguageChangerDatas.sSelected :  the language code of the selected language

The language change is done via javascript
#}

{# There is many condition where the language changer should not be shown. Eg: there is only one language available #}
{% if  aSurveyInfo.alanguageChanger.show == true %}

    {# we set a shortcut for aSurveyInfo.alanguageChangerDatas #}
    {% set aLCD  = aSurveyInfo.alanguageChanger.datas %}

    <!-- Language Changer, top menu version -->
    <li class="dropdown-header text-uppercase">{{ gT("Select language") }}</li>
    <li class="ls-no-js-hidden form-change-lang dropdown nav-item">
        <a href='#' class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdownCustom"
           data-bs-target="#language-dropdown" data-navtargetid="language-dropdown">
            <span class="ls-lang-globe-wrap" aria-label="{{ gT('Select language') }}">
                <svg class="ls-lang-globe" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" focusable="false">
                    <circle cx="12" cy="12" r="9"></circle>
                    <path d="M3 12h18"></path>
                    <path d="M12 3a15.3 15.3 0 0 1 0 18"></path>
                    <path d="M12 3a15.3 15.3 0 0 0 0 18"></path>
                </svg>
                <span class="visually-hidden">{{ gT('Select language') }}</span>
            </span>
        </a>
        <ul class="dropdown-menu dropdown-menu-end" id="language-dropdown">
            {{ include('./subviews/navigation/back.twig') }}
            {# List of available languages. #}
            {% for value, lang in aLCD.aListLang %}
                <li class="index-item">
                    <a href='#' data-limesurvey-lang='{{ value }}' class="dropdown-item ls-language-link">
                        {{ lang }}
                    </a>
                </li>
            {% endfor %}
        </ul>
    </li>
    <li><hr class="dropdown-divider"></li>
{% endif %}

{{ registerScript("BasicThemeScripts-TopLanguageChanger", "basicThemeScripts.initTopMenuLanguageChanger('.ls-language-link ', 'form#limesurvey'); ", "POS_POSTSCRIPT") }}
